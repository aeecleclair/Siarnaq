(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3258:function(e,l,s){Promise.resolve().then(s.bind(s,7368))},7368:function(e,l,s){"use strict";s.r(l),s.d(l,{default:function(){return ee}});var r=s(7437),a=s(7948),i=s(692),n=s(5355);let t=()=>{let{isTokenExpired:e}=(0,a.d)(),{data:l,isLoading:s,refetch:r}=(0,n.a)({queryKey:["onlineSellers"],queryFn:i.keh,retry:3,enabled:!e()});return{onlineSellers:(null==l?void 0:l.data)||[],isLoading:s,refetch:r}};var d=s(9196),o=s(7061),c=s(8087),u=s(7138),x=s(6463),h=s(4008);let m=()=>{var e,l;let s=(0,c.useTranslations)("AssociationPanel"),{onlineSellers:a}=t(),{userId:i}=(0,o.u)(),n=(0,x.useSearchParams)().get("sellerId")||(null===(e=a.at(0))||void 0===e?void 0:e.id),{purchases:m}=(0,d.$)(i),p=null!==(l=null==m?void 0:m.reduce((e,l)=>e+l.quantity,0))&&void 0!==l?l:0;return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"mx-auto grid w-full max-w-6xl gap-2 mb-6",children:(0,r.jsx)("h1",{className:"text-3xl font-semibold",children:s("associations")})}),(0,r.jsxs)("nav",{className:"grid gap-4 text-sm text-muted-foreground",children:[(0,r.jsx)(u.default,{href:"/?sellerId=intro",className:"hover:text-primary ".concat("intro"===n?"font-semibold text-primary":""),children:(0,r.jsxs)("div",{className:"flex flex-row items-center",children:[(0,r.jsx)(h.Moc,{className:"h-4 w-4 mr-2"}),s("presentation")]})}),a.map(e=>{var l;let s=null!==(l=m.filter(l=>l.seller.id===e.id).length)&&void 0!==l?l:0;return(0,r.jsx)(u.default,{href:"/?sellerId=".concat(e.id),className:"hover:text-primary ".concat(e.id===n?"font-semibold text-primary":""),children:(0,r.jsxs)("div",{className:"flex flex-row items-center",children:[s>0?(0,r.jsx)(h.qk2,{className:"h-4 w-4 mr-2"}):(0,r.jsx)("div",{className:"w-4 mr-2"}),e.name,s>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"ml-2",children:"\xb7"}),(0,r.jsx)("span",{className:"ml-2",children:s})]})]})},e.id)}),(0,r.jsx)(u.default,{href:"/?sellerId=recap",className:"hover:text-primary ".concat("recap"===n?"font-semibold text-primary":""),children:(0,r.jsxs)("div",{className:"flex flex-row items-center",children:[(0,r.jsx)(h.GwR,{className:"h-4 w-4 mr-2"}),s("summary"),p>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"ml-2",children:"\xb7"}),(0,r.jsx)("span",{className:"ml-2",children:p})]})]})})]})]})};var p=s(8185),f=s(2265),v=s(4300),j=s(5137),N=s(1976),g=s(9354),w=s(9733);let C=f.createContext(null);function y(){let e=f.useContext(C);if(!e)throw Error("useCarousel must be used within a <Carousel />");return e}let b=f.forwardRef((e,l)=>{let{orientation:s="horizontal",opts:a,setApi:i,plugins:n,className:t,children:d,...o}=e,[c,u]=(0,v.Z)({...a,axis:"horizontal"===s?"x":"y"},n),[x,h]=f.useState(!1),[m,p]=f.useState(!1),j=f.useCallback(e=>{e&&(h(e.canScrollPrev()),p(e.canScrollNext()))},[]),N=f.useCallback(()=>{null==u||u.scrollPrev()},[u]),w=f.useCallback(()=>{null==u||u.scrollNext()},[u]),y=f.useCallback(e=>{"ArrowLeft"===e.key?(e.preventDefault(),N()):"ArrowRight"===e.key&&(e.preventDefault(),w())},[N,w]);return f.useEffect(()=>{u&&i&&i(u)},[u,i]),f.useEffect(()=>{if(u)return j(u),u.on("reInit",j),u.on("select",j),()=>{null==u||u.off("select",j)}},[u,j]),(0,r.jsx)(C.Provider,{value:{carouselRef:c,api:u,opts:a,orientation:s||((null==a?void 0:a.axis)==="y"?"vertical":"horizontal"),scrollPrev:N,scrollNext:w,canScrollPrev:x,canScrollNext:m},children:(0,r.jsx)("div",{ref:l,onKeyDownCapture:y,className:(0,g.cn)("relative",t),role:"region","aria-roledescription":"carousel",...o,children:d})})});b.displayName="Carousel";let _=f.forwardRef((e,l)=>{let{className:s,...a}=e,{carouselRef:i,orientation:n}=y();return(0,r.jsx)("div",{ref:i,className:"overflow-hidden",children:(0,r.jsx)("div",{ref:l,className:(0,g.cn)("flex","horizontal"===n?"-ml-4":"-mt-4 flex-col",s),...a})})});_.displayName="CarouselContent";let P=f.forwardRef((e,l)=>{let{className:s,...a}=e,{orientation:i}=y();return(0,r.jsx)("div",{ref:l,role:"group","aria-roledescription":"slide",className:(0,g.cn)("min-w-0 shrink-0 grow-0 basis-full","horizontal"===i?"pl-4":"pt-4",s),...a})});P.displayName="CarouselItem",f.forwardRef((e,l)=>{let{className:s,variant:a="outline",size:i="icon",...n}=e,{orientation:t,scrollPrev:d,canScrollPrev:o}=y();return(0,r.jsxs)(w.z,{ref:l,variant:a,size:i,className:(0,g.cn)("absolute  h-8 w-8 rounded-full","horizontal"===t?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",s),disabled:!o,onClick:d,...n,children:[(0,r.jsx)(j.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Previous slide"})]})}).displayName="CarouselPrevious",f.forwardRef((e,l)=>{let{className:s,variant:a="outline",size:i="icon",...n}=e,{orientation:t,scrollNext:d,canScrollNext:o}=y();return(0,r.jsxs)(w.z,{ref:l,variant:a,size:i,className:(0,g.cn)("absolute h-8 w-8 rounded-full","horizontal"===t?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",s),disabled:!o,onClick:d,...n,children:[(0,r.jsx)(N.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Next slide"})]})}).displayName="CarouselNext";var k=s(4032),I=s(9055),S=s(9888),z=s(8068),F=s(6943),Z=s(5127),E=s(4599);let O=e=>{var l,s;let{user:a,refetch:n}=e,{toast:d}=(0,z.pm)(),o=(0,c.useTranslations)("IntroCarouselItem"),{scrollNext:u}=y(),{curriculums:h}=(0,F.M)(),{onlineSellers:m}=t(),p=(0,x.useRouter)(),[v,j]=(0,f.useState)(!1),[N,g]=(0,f.useState)(0),w=[o("begin"),o("validate")],[C,b]=(0,f.useState)(null===(l=a.curriculum)||void 0===l?void 0:l.id),O=0===N||1===N&&C&&C!==(null===(s=a.curriculum)||void 0===s?void 0:s.id),B=[(0,r.jsx)("div",{className:"flex flex-col gap-2",children:(0,r.jsx)("span",{children:o("description")})},"intro"),(0,r.jsxs)("div",{className:"h-full gap-4 flex flex-col",children:[(0,r.jsx)("span",{children:o("selectCurriculum")}),(0,r.jsxs)(S.Ph,{value:C,onValueChange:b,children:[(0,r.jsx)(S.i4,{className:"w-[300px] m-auto",children:(0,r.jsx)(S.ki,{})}),(0,r.jsx)(S.Bw,{children:(0,r.jsx)(S.DI,{children:h.map(e=>(0,r.jsx)(S.Ql,{value:e.id,children:(0,r.jsx)(I.C,{variant:"secondary",children:e.name})},e.id))})})]})]},"curriculum")];async function R(){if(j(!0),!C){j(!1);return}let{data:e,error:l}=await (0,i.Vum)({path:{user_id:a.id,curriculum_id:C}});if(l){d({title:"Error",description:l.detail,variant:"destructive"}),j(!1);return}n(),j(!1)}async function q(){if(O){var e;if(1===N){await R();let e=m.length>0?m[0]:void 0;e&&p.push("?sellerId=".concat(e.id))}if(0!==N||(null===(e=a.curriculum)||void 0===e?void 0:e.id)){let e=m.length>0?m[0]:void 0;e&&p.push("?sellerId=".concat(e.id))}else g(N+1),u()}}return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(_,{children:B.map((e,l)=>(0,r.jsx)(P,{children:e},l))}),(0,r.jsx)("div",{className:"pb-6 pt-10 flex justify-center",children:(0,r.jsx)(k.f,{size:"lg",className:"w-[160px]",onClick:q,isLoading:v,children:(0,r.jsx)(Z.M,{initial:!1,mode:"wait",children:(0,r.jsx)(E.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:w[N]},N)})})})]})};var B=s(7042);let R=()=>{let e=(0,c.useTranslations)("IntroPanel"),{userId:l}=(0,o.u)(),{user:s,refetch:a}=(0,B.a)(l);return(0,r.jsxs)(p.Zb,{children:[(0,r.jsx)(p.Ol,{children:(0,r.jsx)(p.ll,{children:e("presentation")})}),(0,r.jsx)(p.aY,{className:"space-y-2",children:(0,r.jsx)(b,{opts:{watchDrag:!1},children:s&&(0,r.jsx)(O,{user:s,refetch:a})})})]})};var q=s(1333),G=s(5265);let U=e=>{let{isTokenExpired:l}=(0,a.d)(),{data:s,isLoading:r,refetch:t}=(0,n.a)({queryKey:["onlineSellerProducts",null!=e?e:""],queryFn:()=>(0,i.vsp)({path:{seller_id:e}}),retry:3,enabled:!l()&&!!e});return{onlineProducts:(null==s?void 0:s.data)||[],isLoading:r,refetch:t}};var A=s(7911),D=s(518),M=s(7592);let L=()=>{var e,l;let s=(0,c.useTranslations)("ProductPanel"),{onlineSellers:a}=t(),i=(0,x.useSearchParams)().get("sellerId")||(null==a?void 0:null===(e=a.at(0))||void 0===e?void 0:e.id)||"",{onlineProducts:n}=U(i),d=null==a?void 0:a.find(e=>e.id===i),u=null==a?void 0:a.findIndex(e=>e.id===i),{productExpansion:h,setExpandedProducts:m}=(0,A.g)(),v=(0,x.useRouter)(),{userId:j}=(0,o.u)(),{user:N}=(0,B.a)(j);(0,f.useEffect)(()=>{void 0===h[i]&&(null==d?void 0:d.id)===i&&n&&m(i,n.map(e=>e.id))},[h,i,m,n,null==d?void 0:d.id]);let g=n.filter(e=>{var l,s,r;return null!==(r=null==e?void 0:null===(s=e.variants)||void 0===s?void 0:null===(l=s.filter(e=>{var l,s,r;return null!==(r=null===(s=e.allowed_curriculum)||void 0===s?void 0:null===(l=s.filter(e=>{var l;return e.id===(null==N?void 0:null===(l=N.curriculum)||void 0===l?void 0:l.id)}))||void 0===l?void 0:l.length)&&void 0!==r&&r}))||void 0===l?void 0:l.length)&&void 0!==r&&r});return(0,r.jsx)("div",{className:"grid gap-6",children:(0,r.jsxs)(p.Zb,{children:[(0,r.jsx)(p.Ol,{children:(0,r.jsx)(p.ll,{children:d?d.name:"No seller found"})}),(0,r.jsx)(p.aY,{children:g.length>0?(0,r.jsx)(G.UQ,{type:"multiple",value:h[i],onValueChange:e=>m(i,e),children:g.map(e=>(0,r.jsx)(q.A,{product:e,sellerId:(null==d?void 0:d.id)||"",userId:j,showDescription:!0,isSelectable:!0,refreshProduct:()=>{}},e.id))}):(0,r.jsx)("h3",{className:"text-lg font-semibold",children:s("noProductFound")})}),(0,r.jsx)(p.eW,{className:"px-6 py-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2 ml-auto",children:[(0,r.jsxs)(w.z,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>{var e;a&&void 0!==u&&v.replace("/?sellerId=".concat((null===(e=a[u-1])||void 0===e?void 0:e.id)||""))},disabled:0===u,children:[(0,r.jsx)("span",{className:"sr-only",children:"Go to previous page"}),(0,r.jsx)(D.Z,{className:"h-4 w-4"})]}),a&&void 0!==u&&(0,r.jsxs)("span",{className:"text-sm font-medium text-muted-foreground w-14 flex justify-center",children:[u+1," / ",a.length]}),(0,r.jsxs)(w.z,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>{var e;a&&void 0!==u&&v.replace("/?sellerId=".concat((null===(e=a[u+1])||void 0===e?void 0:e.id)||""))},disabled:u===(null!==(l=null==a?void 0:a.length)&&void 0!==l?l:0)-1,children:[(0,r.jsx)("span",{className:"sr-only",children:"Go to next page"}),(0,r.jsx)(M.Z,{className:"h-4 w-4"})]})]})})]})})};var T=s(2625),K=s(2140),V=s(4867);let W=e=>{let{isLoading:l,onClick:s}=e;return(0,r.jsxs)(w.z,{className:"border-[#3d33a6] group-hover:border-[#3d33a6] p-0 group",variant:"outline",disabled:l,onClick:s,children:[(0,r.jsxs)("svg",{width:"46",viewBox:"20 0 40 50",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"pl-3 w-14",children:[(0,r.jsxs)("g",{"clip-path":"url(#clip0_16_2460)",children:[(0,r.jsx)("path",{d:"M28.7465 34.0888C24.2637 28.8367 27.2522 15.5602 29.1589 15.5602C25.477 15.4863 19.2669 17.9752 20.1037 26.856C20.428 29.479 21.4172 31.9676 22.9717 34.071C24.5263 36.1745 26.5912 37.8184 28.9584 38.8373C31.3257 39.8562 33.9116 40.2139 36.4558 39.8746C38.9999 39.5352 41.4123 38.5107 43.4499 36.9043C36.409 42.0947 31.6364 37.468 28.7465 34.0888Z",fill:"url(#paint0_linear_16_2460)"}),(0,r.jsx)("path",{d:"M45.1931 25.1679C41.4695 32.8474 30.0474 36.0787 28.7563 34.1011C30.9888 37.4433 36.5265 42.1101 43.5046 36.8734C45.5247 35.2573 47.0962 33.1214 48.0613 30.6806C49.0264 28.2397 49.3509 25.58 49.0022 22.9689C48.6536 20.3577 47.6441 17.8872 46.0752 15.8059C44.5063 13.7245 42.4334 12.1056 40.0649 11.1121C47.9515 14.7223 47.1536 21.1234 45.1931 25.1679Z",fill:"url(#paint1_linear_16_2460)"}),(0,r.jsx)("path",{d:"M29.1602 15.5613C37.2292 14.671 46.3531 23.1852 45.1936 25.169C47.4648 21.2015 47.9848 14.7234 40.1131 11.1132C37.7418 10.118 35.1584 9.78278 32.6218 10.1412C30.0853 10.4996 27.6847 11.5391 25.6607 13.1554C23.6368 14.7716 22.0606 16.9079 21.0902 19.35C20.1199 21.7922 19.7894 24.4543 20.1319 27.0696C19.5611 18.2381 26.1478 15.8939 29.1602 15.5613Z",fill:"url(#paint2_linear_16_2460)"})]}),(0,r.jsxs)("linearGradient",{id:"paint0_linear_16_2460",x1:"23.1041",y1:"17.5615",x2:"36.9885",y2:"40.8976",gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{"stop-color":"#3B8964"}),(0,r.jsx)("stop",{offset:"0.25","stop-color":"#5ABF8C"})]}),(0,r.jsxs)("linearGradient",{id:"paint1_linear_16_2460",x1:"33.6387",y1:"38.5088",x2:"48.0033",y2:"15.916",gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{"stop-color":"#803471"}),(0,r.jsx)("stop",{offset:"0.21","stop-color":"#B34F9E"})]}),(0,r.jsxs)("linearGradient",{id:"paint2_linear_16_2460",x1:"22.2234",y1:"16.1265",x2:"45.6611",y2:"24.404",gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{offset:"0.6","stop-color":"#F99C2E"}),(0,r.jsx)("stop",{offset:"1","stop-color":"#C57538"})]}),(0,r.jsx)("clipPath",{id:"clip0_16_2460",children:(0,r.jsx)("rect",{width:"30",height:"30",fill:"white",transform:"translate(20 10)"})}),(0,r.jsx)("clipPath",{id:"clip1_16_2460",children:(0,r.jsx)("rect",{width:"72",height:"22",fill:"white",transform:"translate(173 14)"})})]}),(0,r.jsx)("span",{className:"text-white bg-[#4C40CF] group-hover:bg-[#3d33a6] h-full justify-center flex items-center rounded-r-sm w-[165px]",children:l?(0,r.jsx)(V.BGW,{className:"h-4 w-4 animate-spin"}):(0,r.jsxs)(r.Fragment,{children:["Payer avec ",(0,r.jsx)("span",{className:"font-bold ml-1",children:"helloasso"})]})})]})};var Y=s(4662),Q=s(3304);let $=e=>{let{isOpened:l,setIsOpened:s,isLoading:a,title:i,description:n,validateLabel:t,callback:d,width:o="w-[100px]",customButton:c}=e;return(0,r.jsx)(Y.Vq,{open:l,onOpenChange:s,children:(0,r.jsxs)(Y.cZ,{className:"sm:max-w-[600px]",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)(Y.fK,{children:(0,r.jsx)(Y.$N,{children:i})}),(0,r.jsx)(Q.Be,{children:n}),(0,r.jsxs)("div",{className:"flex justify-end mt-2 space-x-4",children:[(0,r.jsx)(w.z,{variant:"outline",onClick:function(e){e.stopPropagation(),s(!1)},disabled:a,className:o,children:"Annuler"}),null!=c?c:(0,r.jsx)(k.f,{isLoading:a,onClick:function(e){e.stopPropagation(),d&&d()},className:o,children:t})]})]})})},X=()=>{let e=(0,c.useTranslations)("PaymentButton"),[l,s]=(0,f.useState)(!1),[a,i]=(0,f.useState)(!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)($,{isOpened:l,setIsOpened:s,isLoading:a,title:"Payer",description:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"my-2 font-semibold",children:e("title")}),(0,r.jsx)("p",{children:e("description")})]}),customButton:(0,r.jsx)(W,{isLoading:a})}),(0,r.jsx)(w.z,{className:"col-span-4 ml-auto w-[100px]",onClick:e=>{s(!0)},children:e("pay")})]})},H=()=>{let{userId:e}=(0,o.u)(),{user:l}=(0,B.a)(e);return(0,r.jsxs)(p.Zb,{children:[(0,r.jsx)(p.Ol,{}),(0,r.jsx)(p.aY,{className:"space-y-2",children:l&&(0,r.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,r.jsx)(K.q,{user:l}),(0,r.jsx)(T.X,{user:l})]})}),(0,r.jsx)(p.eW,{className:"px-6 py-4",children:(0,r.jsx)(X,{})})]})},J=()=>{var e;let{onlineSellers:l}=t(),s=(0,x.useSearchParams)().get("sellerId")||(null===(e=l.at(0))||void 0===e?void 0:e.id)||"";return"intro"===s?(0,r.jsx)(R,{}):"recap"===s?(0,r.jsx)(H,{}):(0,r.jsx)(L,{})};function ee(){return(0,r.jsx)("div",{className:"flex min-h-screen w-full flex-col",children:(0,r.jsx)("main",{className:"flex min-h-[calc(100vh_-_theme(spacing.16))] flex-1 flex-col gap-4 bg-muted/40 p-4 md:gap-8 md:p-10",children:(0,r.jsxs)("div",{className:"mx-auto grid w-full max-w-6xl items-start gap-6 md:grid-cols-[180px_1fr] lg:grid-cols-[250px_1fr]",children:[(0,r.jsx)(m,{}),(0,r.jsx)(J,{})]})})})}}},function(e){e.O(0,[310,516,422,8,622,213,540,360,587,971,23,744],function(){return e(e.s=3258)}),_N_E=e.O()}]);